typeof window!="undefined"&&(window.exdi={}),function(a,b){function c(a){b?setTimeout(function(){a()}):process.nextTick(a)}function d(a){var b=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,c=/\s*,\s*/,d=/^\s*(_?)(.+?)\1\s*$/,e=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,f=0,g,h,i,j,k=[];if(typeof a!="function")throw new Error("To extract parameters names you must provide a function");g=a.toString().replace(e,""),h=g.match(b),i=h[1].split(c);if(i.length)for(f=0;f<i.length;f++)i[f]&&k.push(i[f]);return k}function e(a){if(this instanceof e==0)return new e(a);var b=[],c=0,d,f=[],g=0,h=!1;d=function(){return b[c]&&c<b.length&&typeof b[c].fn=="function"?(c++,b[c-1].params.exdiDone=d,a.execute(b[c-1].fn,b[c-1].params,b[c-1].context||a,!0),!1):(h&&clearTimeout(h),!0)},this.add=function(a,c,d){if(typeof a!="function")throw new Error("You can add only functions to queue");c instanceof Object==0&&(c={});if(!d||!(d instanceof Object))d=undefined;return b.push({fn:a,params:c,context:d}),this},this.on=function(a,b){a=String(a).toLowerCase();if(a!=="timeout")throw new Error("Unrecognized event "+String(a));if(typeof b!="function")throw new Error("Callback must be a function");if(a!=="timeout")throw new Error("Unrecognized event "+a+". Available events are: step, timeout and done.");return f.push(b),this},this.setTimeoutLimit=function(a){return g=Math.abs(parseInt(a,10)),this},this.clearQueue=function(){return b=[],this},this.execute=function(){c=0,d();if(g>0){var e=this;h=setTimeout(function(){d=function(){return!1};for(c=0;c<f.length;c++)a.execute(f[c],{},a,!0)},g)}return this},this.run=this.execute}function f(a){if(this instanceof f==0)return new f(a);var b={},c={},d=0,e=0,g=[],h=[],i=[],j=0,k=!1;this.add=function(f,i,j){if(typeof f!="function")throw new Error("You can add only functions to queue");i instanceof Object==0&&(i={});if(!j||!(j instanceof Object))j=undefined;return d++,function(d){i.exdiDone=function(){if(c[d]!==!1)return;c[d]=!0;var b=!0,f="";for(f in c)if(c.hasOwnProperty(f)&&c[f]===!1){b=!1;break}if(!b)for(e=0;e<g.length;e++)a.execute(g[e],{},a,!0);else{k&&clearTimeout(k);for(e=0;e<h.length;e++)a.execute(h[e],{},a,!0)}},b[d]={fn:f,params:i,context:j},c[d]=!1}("task"+String(d)),this},this.clearTasks=function(){return b={},d=0,this},this.on=function(a,b){a=String(a).toLowerCase();if(a!=="step"&&a!=="done"&&a!=="timeout")throw new Error("Unrecognized event "+String(a));if(typeof b!="function")throw new Error("Callback must be a function");if(a==="step")g.push(b);else if(a==="timeout")i.push(b);else{if(a!=="done")throw new Error("Unrecognized event "+a+". Available events are: step, timeout and done.");h.push(b)}return this},this.setTimeoutLimit=function(a){return j=Math.abs(parseInt(a,10)),this},this.execute=function(){var f="";for(f in b)c[f]=!1,a.execute(b[f].fn,b[f].params,b[f].context||a,!0);if(j>0){var g=this;k=setTimeout(function(){c={},b={},d=0;for(e=0;e<i.length;e++)a.execute(i[e],{},a,!0)},j)}return this},this.run=this.execute}function g(a){if(this instanceof g==0)return new g(a);a||(a={}),this.set=function(b,c){b=String(b);if(b.length===0||b==="exdi")throw new Error("Invalid name");if(/^[A-Z]/.test(b[0].toString())&&typeof c!="function")throw new Error("All variables named using first capital letter are constructors and must have first capital letter.");return a[b]=c,this},this.get=function(b,c,d){b=String(b);if(b.length===0)throw new Error("Invalid name");return b==="exdi"?this:/^[A-Z]/.test(b[0].toString())&&typeof a[b]=="function"?this.execute(a[b],c,d):a[b]===undefined?c:a[b]},this.delete=function(b){return b=String(b),delete a[b],this},this.execute=function(b,e,f,g){e||(e=[]);if(typeof b!="function")throw new Error("You can only execute a function");var h=[],i=[],j=0;h=d(b);if(h.length>0)for(j=0;j<h.length;j++){if(e[h[j]]){i.push(e[h[j]]);continue}if(a[h[j]]){i.push(this.get(h[j]));continue}i.push(undefined)}return f=f instanceof Object?f:this,g===!0?c(function(){b.apply(f,i)}):b.apply(f,i)},this.run=this.execute,this.createQueue=function(){return new e(this)},this.createParallel=function(){return new f(this)}}"use strict";var h={};a.get=function(a){return a=String(a),h[a]instanceof g==0&&(h[a]=new g),h[a]},a.all=function(){return h},a.delete=function(a){return a=String(a),delete h[a],this},a.create=function(){return new g},a.createContainer=a.create,a.createQueue=function(){return a.createContainer().createQueue()},a.createParallel=function(){return a.createContainer().createParallel()}}(typeof window=="undefined"?module.exports:window.exdi,typeof window=="undefined"?!1:!0);