typeof window!="undefined"&&(window.exdi={}),function(a){function b(a){var b=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,c=/\s*,\s*/,d=/^\s*(_?)(.+?)\1\s*$/,e=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,f=0,g,h,i,j,k=[];if(typeof a!="function")throw new Error("To extract parameters names you must provide a function");g=a.toString().replace(e,""),h=g.match(b),i=h[1].split(c);if(i.length)for(f=0;f<i.length;f++)i[f]&&k.push(i[f]);return k}function c(a){if(this instanceof c==0)return new c(a);var b=[],d=0,e;e=function(){b[d]&&d<b.length&&typeof b[d].fn=="function"&&(d++,b[d-1].params.exdiDone=e,a.execute(b[d-1].fn,b[d-1].params,b[d-1].context||a))},this.add=function(a,c,d){if(typeof a!="function")throw new Error("You can add only functions to queue");c instanceof Object==0&&(c={});if(!d||!(d instanceof Object))d=undefined;return b.push({fn:a,params:c,context:d}),this},this.clearQueue=function(){return b=[],this},this.execute=function(){return e(),this},this.run=this.execute}function d(a){if(this instanceof d==0)return new d(a);var b={},c={},e=0,f=0,g=[],h=[];this.add=function(d,j,k){if(typeof d!="function")throw new Error("You can add only functions to queue");j instanceof Object==0&&(j={});if(!k||!(k instanceof Object))k=undefined;return e++,function(e){j.exdiDone=function(){c[e]=!0;var b=!0,d="";for(d in c)if(c.hasOwnProperty(d)&&!c[d]){b=!1;break}if(!b)for(f=0;f<g.length;f++)a.execute(g[f],{},a);else for(f=0;f<h.length;f++)a.execute(h[f],{},a)},b[e]={fn:d,params:j,context:k},c[e]=!1}("task"+String(e)),this},this.clearTasks=function(){return b={},e=0,this},this.on=function(a,b){a=String(a).toLowerCase();if(a!=="step"&&a!=="done")throw new Error("Unrecognized event "+String(a));if(typeof b!="function")throw new Error("Callback must be a function");return a==="step"?g.push(b):h.push(b),this},this.execute=function(){var c="";for(c in b)a.execute(b[c].fn,b[c].params,b[c].context||a);return this},this.run=this.execute}function e(a){if(this instanceof e==0)return new e(a);a||(a={}),this.set=function(b,c){b=String(b);if(b.length===0)throw new Error("Invalid name");if(/^[A-Z]/.test(b[0].toString())&&typeof c!="function")throw new Error("All variables named using first capital letter are constructors and must have first capital letter.");return a[b]=c,this},this.get=function(b,c,d){b=String(b);if(b.length===0)throw new Error("Invalid name");return/^[A-Z]/.test(b[0].toString())&&typeof a[b]=="function"?this.execute(a[b],c,d):a[b]===undefined?c:a[b]},this.delete=function(b){return b=String(b),delete a[b],this},this.execute=function(c,d,e){d||(d=[]);if(typeof c!="function")throw new Error("You can only execute a function");var f=[],g=[],h=0;f=b(c);if(f.length>0)for(h=0;h<f.length;h++){if(d[f[h]]){g.push(d[f[h]]);continue}if(a[f[h]]){g.push(this.get(f[h]));continue}g.push(undefined)}return c.apply(e instanceof Object?e:this,g)},this.createQueue=function(){return new c(this)},this.createParallel=function(){return new d(this)}}"use strict";var f={};a.get=function(a){return a=String(a),f[a]instanceof e==0&&(f[a]=new e),f[a]},a.all=function(){return f},a.delete=function(a){return a=String(a),delete f[a],this},a.create=function(){return new e}}(typeof window=="undefined"?module.exports:window.exdi);