typeof window!="undefined"&&(window.exdi={}),function(a){function b(a){var b=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,c=/\s*,\s*/,d=/^\s*(_?)(.+?)\1\s*$/,e=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/mg,f=0,g,h,i,j,k=[];if(typeof a!="function")throw new Error("To extract parameters names you must provide a function");g=a.toString().replace(e,""),h=g.match(b),i=h[1].split(c);if(i.length)for(f=0;f<i.length;f++)i[f]&&k.push(i[f]);return k}function c(a){if(this instanceof c==0)return new c(a);var b=[],d=0,e,f=[],g=0,h=!1;e=function(){b[d]&&d<b.length&&typeof b[d].fn=="function"?(d++,b[d-1].params.exdiDone=e,a.execute(b[d-1].fn,b[d-1].params,b[d-1].context||a)):h&&clearTimeout(h)},this.add=function(a,c,d){if(typeof a!="function")throw new Error("You can add only functions to queue");c instanceof Object==0&&(c={});if(!d||!(d instanceof Object))d=undefined;return b.push({fn:a,params:c,context:d}),this},this.on=function(a,b){a=String(a).toLowerCase();if(a!=="timeout")throw new Error("Unrecognized event "+String(a));if(typeof b!="function")throw new Error("Callback must be a function");if(a!=="timeout")throw new Error("Unrecognized event "+a+". Available events are: step, timeout and done.");return f.push(b),this},this.clearQueue=function(){return b=[],this},this.execute=function(){e();if(g>0){var c=this;h=setTimeout(function(){e=function(){return!1};for(d=0;d<f.length;d++)a.execute(f[d],{},a)},g*1e3)}return this},this.run=this.execute}function d(a){if(this instanceof d==0)return new d(a);var b={},c={},e=0,f=0,g=[],h=[],i=[],j=0,k=!1;this.add=function(d,i,j){if(typeof d!="function")throw new Error("You can add only functions to queue");i instanceof Object==0&&(i={});if(!j||!(j instanceof Object))j=undefined;return e++,function(e){i.exdiDone=function(){if(c[e]!==!1)return;c[e]=!0;var b=!0,d="";for(d in c)if(c.hasOwnProperty(d)&&c[d]===!1){b=!1;break}if(!b)for(f=0;f<g.length;f++)a.execute(g[f],{},a);else{k&&clearTimeout(k);for(f=0;f<h.length;f++)a.execute(h[f],{},a)}},b[e]={fn:d,params:i,context:j},c[e]=!1}("task"+String(e)),this},this.clearTasks=function(){return b={},e=0,this},this.on=function(a,b){a=String(a).toLowerCase();if(a!=="step"&&a!=="done"&&a!=="timeout")throw new Error("Unrecognized event "+String(a));if(typeof b!="function")throw new Error("Callback must be a function");if(a==="step")g.push(b);else if(a==="timeout")i.push(b);else{if(a!=="done")throw new Error("Unrecognized event "+a+". Available events are: step, timeout and done.");h.push(b)}return this},this.setTimeoutLimit=function(a){j=Math.abs(parseInt(a,10))},this.execute=function(){var d="";for(d in b)a.execute(b[d].fn,b[d].params,b[d].context||a);if(j>0){var g=this;k=setTimeout(function(){c={},b={},e=0;for(f=0;f<i.length;f++)a.execute(i[f],{},a)},j*1e3)}return this},this.run=this.execute}function e(a){if(this instanceof e==0)return new e(a);a||(a={}),this.set=function(b,c){b=String(b);if(b.length===0||b==="exdi")throw new Error("Invalid name");if(/^[A-Z]/.test(b[0].toString())&&typeof c!="function")throw new Error("All variables named using first capital letter are constructors and must have first capital letter.");return a[b]=c,this},this.get=function(b,c,d){b=String(b);if(b.length===0)throw new Error("Invalid name");return b==="exdi"?this:/^[A-Z]/.test(b[0].toString())&&typeof a[b]=="function"?this.execute(a[b],c,d):a[b]===undefined?c:a[b]},this.delete=function(b){return b=String(b),delete a[b],this},this.execute=function(c,d,e){d||(d=[]);if(typeof c!="function")throw new Error("You can only execute a function");var f=[],g=[],h=0;f=b(c);if(f.length>0)for(h=0;h<f.length;h++){if(d[f[h]]){g.push(d[f[h]]);continue}if(a[f[h]]){g.push(this.get(f[h]));continue}g.push(undefined)}return c.apply(e instanceof Object?e:this,g)},this.createQueue=function(){return new c(this)},this.createParallel=function(){return new d(this)}}"use strict";var f={};a.get=function(a){return a=String(a),f[a]instanceof e==0&&(f[a]=new e),f[a]},a.all=function(){return f},a.delete=function(a){return a=String(a),delete f[a],this},a.createContainer=function(){return new e},a.create=a.createContainer(),a.createQueue=function(){return a.createContainer().createQueue()},a.createParallel=function(){return a.createContainer().createParallel()}}(typeof window=="undefined"?module.exports:window.exdi);